# 参考资料

1、[ISO - ISO 8583-1:2003 - Financial transaction card originated messages — Interchange message specifications — Part 1: Messages, data elements and code values](https://www.iso.org/standard/31628.html)

2、[8583报文的使用和解析 - learn_java - 博客园 (cnblogs.com)](https://www.cnblogs.com/yiyi16801/p/7442316.html)

3、《中国银联银行卡交换系统技术规范 第2部分 报文接口规范》

# 概述

8583 报文包，来源于 ISO 8583 金融交易卡原始报文-交换报文规范（Financial transaction card originated messages — Interchange message specifications），是 ISO (the International Organization for Standardization)  标准化的产物。8583 是 ISO 标准的编号。

目前的版本为 2017 年版。ISO 官方链接如下：https://www.iso.org/standard/31628.html

8583 规范包括三个部分：

* — Part 1: Messages, data elements and code values
* — Part 2: Application and registration procedures for Institution Identification Codes (IIC)
* — Part 3: Maintenance procedures for messages, data elements and code values

重点需要关注第一部分：

* 8583 规范的第一部分定义了 8583 报文、数据项和代码值。

当前，8583 报文已经是一种报文形式，由交易双方约定交易规范。因此，下文将以中国银联标准的 2.1 版联机 8583 报文为例进行介绍。

# 报文结构（message）

## 概述

中国银联标准的 8583 报文分为四个部分：

* 报文头：中国银联定义的报文头标准，
* 报文类型标识符：
* 位图：
* 报文域：

![image-20211021095858379](D:/Codes/study-notes/ISO%208583.assets/image-20211021095858379.png)

## 报文结构分析

![img](D:/Codes/study-notes/ISO%208583.assets/1002054-20170828082634187-386735612.jpg)

![image-20211021100113878](D:/Codes/study-notes/ISO%208583.assets/image-20211021100113878.png)

1. 报文头：

   | 域     | 域名                                      |
   | ------ | ----------------------------------------- |
   | Field1 | 头长度（Header Length）                   |
   | Field2 | 头标识和版本号（Header Flag and Version） |
   | Field3 | 整个报文长度（Total Message Length）      |
   | Field4 | 目的ID（Destination ID）                  |
   | Field5 | 源ID（Source ID）                         |
   | Field6 | 报文状态标识（Message Status Flags）      |
   | Field7 | 批次号（Batch Number）                    |
   | Field8 | 保留使用（Reserved for Use）              |
   | Field9 | 用户信息（User Info）                     |

2. 报文类型标识符：

3. 位图：

4. 报文域：

## 报文头

## 报文类型标识符

## 位图

## 报文域

# 数据项（data elements）

## 概述

又称 8583 域，每个域包括以下几个属性：

* 位：处于位图的第 N 位
* 数据类型：ascii、binary、bcd
* 是否变长：0-否、1-LVAR、2-LLVAR、3-LLLVAR
* 数据长度（不包含变长位的字节长度）：
* 数据字节流：byte[]

## 编码方式

8583 报文以十六进制 ASCII 码形式发送。

中文以 GBK 编码。

## ASCII 编码

# 代码值（code values）